#!/usr/bin/env ruby
require "slop"

opts = Slop.new(:strict => true)
opts.parse do |action|
  require "yads"
  deployer = Yads::Deployer.new(STDOUT)

  action = action.to_sym
  if !action.empty? && deployer.respond_to?(action)
    deployer.send(action)
  else
    puts "Unknow command \"#{action}\""
    commands = ["setup", "deploy"].concat(deployer.command_names).join("|")
    puts "Usage: yads [#{commands}]"
  end
end
